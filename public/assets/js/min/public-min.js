(function(){function t(){}function o(t,e){for(var n=t.length;n--;)if(t[n].listener===e)return n;return-1}function e(t){return function(){return this[t].apply(this,arguments)}}var n=t.prototype,i=this,r=i.EventEmitter;n.getListeners=function(t){var e,n,i=this._getEvents();if("object"==typeof t)for(n in e={},i)i.hasOwnProperty(n)&&t.test(n)&&(e[n]=i[n]);else e=i[t]||(i[t]=[]);return e},n.flattenListeners=function(t){var e,n=[];for(e=0;t.length>e;e+=1)n.push(t[e].listener);return n},n.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&((e={})[t]=n),e||n},n.addListener=function(t,e){var n,i=this.getListenersAsObject(t),r="object"==typeof e;for(n in i)i.hasOwnProperty(n)&&-1===o(i[n],e)&&i[n].push(r?e:{listener:e,once:!1});return this},n.on=e("addListener"),n.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},n.once=e("addOnceListener"),n.defineEvent=function(t){return this.getListeners(t),this},n.defineEvents=function(t){for(var e=0;t.length>e;e+=1)this.defineEvent(t[e]);return this},n.removeListener=function(t,e){var n,i,r=this.getListenersAsObject(t);for(i in r)r.hasOwnProperty(i)&&(-1!==(n=o(r[i],e))&&r[i].splice(n,1));return this},n.off=e("removeListener"),n.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},n.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},n.manipulateListeners=function(t,e,n){var i,r,o=t?this.removeListener:this.addListener,s=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(i=n.length;i--;)o.call(this,e,n[i]);else for(i in e)e.hasOwnProperty(i)&&(r=e[i])&&("function"==typeof r?o.call(this,i,r):s.call(this,i,r));return this},n.removeEvent=function(t){var e,n=typeof t,i=this._getEvents();if("string"===n)delete i[t];else if("object"===n)for(e in i)i.hasOwnProperty(e)&&t.test(e)&&delete i[e];else delete this._events;return this},n.removeAllListeners=e("removeEvent"),n.emitEvent=function(t,e){var n,i,r,o=this.getListenersAsObject(t);for(r in o)if(o.hasOwnProperty(r))for(i=o[r].length;i--;)!0===(n=o[r][i]).once&&this.removeListener(t,n.listener),n.listener.apply(this,e||[])===this._getOnceReturnValue()&&this.removeListener(t,n.listener);return this},n.trigger=e("emitEvent"),n.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},n.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},n._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},n._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return i.EventEmitter=r,t},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return t}):"object"==typeof module&&module.exports?module.exports=t:this.EventEmitter=t}).call(this),function(n){function i(t){var e=n.event;return e.target=e.target||e.srcElement||t,e}var t=document.documentElement,e=function(){};t.addEventListener?e=function(t,e,n){t.addEventListener(e,n,!1)}:t.attachEvent&&(e=function(e,t,n){e[t+n]=n.handleEvent?function(){var t=i(e);n.handleEvent.call(n,t)}:function(){var t=i(e);n.call(e,t)},e.attachEvent("on"+t,e[t+n])});var r=function(){};t.removeEventListener?r=function(t,e,n){t.removeEventListener(e,n,!1)}:t.detachEvent&&(r=function(e,n,i){e.detachEvent("on"+n,e[n+i]);try{delete e[n+i]}catch(t){e[n+i]=void 0}});var o={bind:e,unbind:r};"function"==typeof define&&define.amd?define("eventie/eventie",o):n.eventie=o}(this),function(n,i){"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(t,e){return i(n,t,e)}):"object"==typeof exports?module.exports=i(n,require("wolfy87-eventemitter"),require("eventie")):n.imagesLoaded=i(n,n.EventEmitter,n.eventie)}(window,function(t,e,n){function r(t,e){for(var n in e)t[n]=e[n];return t}function o(t){var e,n=[];if(e=t,"[object Array]"===d.call(e))n=t;else if("number"==typeof t.length)for(var i=0,r=t.length;i<r;i++)n.push(t[i]);else n.push(t);return n}function s(t,e,n){if(!(this instanceof s))return new s(t,e);"string"==typeof t&&(t=document.querySelectorAll(t)),this.elements=o(t),this.options=r({},this.options),"function"==typeof e?n=e:r(this.options,e),n&&this.on("always",n),this.getImages(),u&&(this.jqDeferred=new u.Deferred);var i=this;setTimeout(function(){i.check()})}function i(t){this.img=t}function a(t){this.src=t,p[t]=this}var u=t.jQuery,f=t.console,c=void 0!==f,d=Object.prototype.toString;(s.prototype=new e).options={},s.prototype.getImages=function(){this.images=[];for(var t=0,e=this.elements.length;t<e;t++){var n=this.elements[t];"IMG"===n.nodeName&&this.addImage(n);var i=n.nodeType;if(i&&(1===i||9===i||11===i))for(var r=n.querySelectorAll("img"),o=0,s=r.length;o<s;o++){var a=r[o];this.addImage(a)}}},s.prototype.addImage=function(t){var e=new i(t);this.images.push(e)},s.prototype.check=function(){function t(t,e){return n.options.debug&&c&&f.log("confirm",t,e),n.progress(t),++i===r&&n.complete(),!0}var n=this,i=0,r=this.images.length;if(this.hasAnyBroken=!1,r)for(var e=0;e<r;e++){var o=this.images[e];o.on("confirm",t),o.check()}else this.complete()},s.prototype.progress=function(t){this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded;var e=this;setTimeout(function(){e.emit("progress",e,t),e.jqDeferred&&e.jqDeferred.notify&&e.jqDeferred.notify(e,t)})},s.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var n=this;setTimeout(function(){if(n.emit(e,n),n.emit("always",n),n.jqDeferred){var t=n.hasAnyBroken?"reject":"resolve";n.jqDeferred[t](n)}})},u&&(u.fn.imagesLoaded=function(t,e){return new s(this,t,e).jqDeferred.promise(u(this))}),(i.prototype=new e).check=function(){var t=p[this.img.src]||new a(this.img.src);if(t.isConfirmed)this.confirm(t.isLoaded,"cached was confirmed");else if(this.img.complete&&void 0!==this.img.naturalWidth)this.confirm(0!==this.img.naturalWidth,"naturalWidth");else{var n=this;t.on("confirm",function(t,e){return n.confirm(t.isLoaded,e),!0}),t.check()}},i.prototype.confirm=function(t,e){this.isLoaded=t,this.emit("confirm",this,e)};var p={};return(a.prototype=new e).check=function(){if(!this.isChecked){var t=new Image;n.bind(t,"load",this),n.bind(t,"error",this),t.src=this.src,this.isChecked=!0}},a.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},a.prototype.onload=function(t){this.confirm(!0,"onload"),this.unbindProxyEvents(t)},a.prototype.onerror=function(t){this.confirm(!1,"onerror"),this.unbindProxyEvents(t)},a.prototype.confirm=function(t,e){this.isConfirmed=!0,this.isLoaded=t,this.emit("confirm",this,e)},a.prototype.unbindProxyEvents=function(t){n.unbind(t.target,"load",this),n.unbind(t.target,"error",this)},s}),function(_){"use strict";var e=function(){var v=_(window).height(),g=spuvar.is_admin,w=spuvar.is_preview,b=[];function c(t){var e=b[t],n=_(window).width(),i=_(window).height(),r=e.outerHeight(),o=e.outerWidth(),s=e.data("width"),a=0,u=i/2-r/2,f="fixed",c=_(document).scrollTop();e.hasClass("spu-centered")&&(s<n&&(a=n/2-o/2),e.css({left:a,position:f,top:u})),i<r+50&&(f="absolute",u=c,e.css({position:f,top:u,bottom:"auto"}))}function d(t){var e=t,n=e.data("total");if(n){!function(){if("undefined"!=typeof spuvar_social&&spuvar_social.facebook)try{FB.XFBML.parse()}catch(t){}if("undefined"!=typeof spuvar_social&&spuvar_social.google)try{gapi.plusone.go()}catch(t){}if("undefined"!=typeof spuvar_social&&spuvar_social.twitter)try{twttr.widgets.load()}catch(t){}}();var i=0,r=0,o=e.outerWidth(),s=e.find(".spu-content").width();!spuvar.disable_style&&_(window).width()>o&&(e.find(".spu-shortcode").wrapAll('<div class="spu_shortcodes"/>'),e.find(".spu-shortcode").each(function(){i+=_(this).outerWidth()}),r=s-i-20*n),0<r&&(e.find(".spu-shortcode").each(function(){_(this).css("margin-left",r/2)}),2==n?e.find(".spu-shortcode").last().css("margin-left",0):3==n&&e.find(".spu-shortcode").first().css("margin-left",0))}}function y(t,e,n){var i=b[t],r=_("#spu-bg-"+t),o=i.data("bgopa");if(i.is(":animated"))return!1;if(!0===e&&i.is(":visible")||!1===e&&i.is(":hidden"))return!1;if(!1===e){var s=parseFloat(i.data("close-cookie"));!0===n&&(s=parseFloat(i.data("cookie"))),0<s&&function(t,e,n){if(n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);var r="; expires="+i.toGMTString()}else var r="";document.cookie=t+"="+e+r+"; path=/"}("spu_box_"+t,!0,s),i.trigger("spu.box_close",[t]);var a=i.find('iframe[src*="vimeo"],iframe[src*="youtube"]');a&&a.length&&i.remove()}else setTimeout(function(){d(i)},1500),i.trigger("spu.box_open",[t]),_(window).resize(function(){c(t)}),c(t);var u=i.data("spuanimation"),f=i.data("close-on-conversion");return"fade"===u?!0===e?i.fadeIn("slow"):!1===e&&(f&&n||!n)&&i.fadeOut("slow"):"disable"===u?!0===e?i.show():!1===e&&(f&&n||!n)&&i.hide():!0===e?i.slideDown("slow"):!1===e&&(f&&n||!n)&&i.slideUp("slow"),!0===e&&0<o?"disable"===u?r.show():r.fadeIn():!1===e&&(f&&n||!n)&&("disable"===u?r.hide():r.fadeOut()),e}return _(".spu-content").children().first().css({"margin-top":0,"padding-top":0}).end().last().css({"margin-bottom":0,"padding-bottom":0}),_(".spu-box").each(function(){spuvar.safe_mode&&_(this).prependTo("body");var u=_(this),t=u.data("trigger"),e=0,n=1===parseInt(u.data("test-mode")),f=u.data("box-id"),i=1===parseInt(u.data("auto-hide")),r=(parseInt(u.data("seconds-close")),parseInt(u.data("trigger-number"),10)),o=("percentage"==t?parseInt(u.data("trigger-number"),10)/100:.8)*_(document).height();!function(t){var e=_(t).find(".spu-facebook");if(e.length){var n=e.find(".fb-like > span").width();if(0==n){var i=e.find(".fb-like").data("layout");"box_count"==i?e.append('<style type="text/css"> #'+_(t).attr("id")+" .fb-like iframe, #"+_(t).attr("id")+" .fb_iframe_widget span, #"+_(t).attr("id")+" .fb_iframe_widget{ height: 63px !important;width: 80px !important;}</style>"):"button_count"==i?e.append('<style type="text/css"> #'+_(t).attr("id")+" .fb-like iframe, #"+_(t).attr("id")+" .fb_iframe_widget span, #"+_(t).attr("id")+" .fb_iframe_widget{ height: 20px !important;min-width: 120px !important;}</style>"):e.append('<style type="text/css"> #'+_(t).attr("id")+" .fb-like iframe, #"+_(t).attr("id")+" .fb_iframe_widget span, #"+_(t).attr("id")+" .fb_iframe_widget{ height: 20px !important;width: 80px !important;}</style>")}}}(u),u.on("click",'a:not(".spu-close-popup, .flp_wrapper a, .spu-not-close, .spu-not-close a")',function(){y(f,!1,!0)}),_(document).keyup(function(t){27==t.keyCode&&y(f,!1,!1)});var s=navigator.userAgent,a=s.match(/iPad/i)||s.match(/iPhone/i)?"touchstart":"click";_("body").on(a,function(t){var e=_(t.target);void 0===t.originalEvent||_.contains(u,e)&&e.is("input")||y(f,!1,!1)}),_("body").on(a,".spu-box,.spu-clickable",function(t){t.stopPropagation()}),u.hide().css("left",""),b[f]=u;var c=function(){e&&clearTimeout(e),e=window.setTimeout(function(){var t=_(window).scrollTop();o<=t+v?(i||_(window).unbind("scroll",c),y(f,!0,!1)):y(f,!1,!1)},100)},d=function(){e&&clearTimeout(e),e=window.setTimeout(function(){var t=_(window).scrollTop();r<=t?(i||_(window).unbind("scroll",d),y(f,!0,!1)):y(f,!1,!1)},100)},p=function(t){for(var e=t+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var r=n[i];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(e))return r.substring(e.length,r.length)}return null}("spu_box_"+f);(null==p||""==p||g&&n||w)&&("seconds"==t&&(e&&clearTimeout(e),e=window.setTimeout(function(){y(f,!0,!1)},1e3*r)),"percentage"==t&&(_(window).bind("scroll",c),c()),"pixels"==t&&(_(window).bind("scroll",d),d()),window.location.hash&&0<window.location.hash.length&&window.location.hash.substring(1)===u.attr("id")&&setTimeout(function(){y(f,!0,!1)},100));u.on("click",".spu-close-popup",function(){y(f,!1,!1),"percentage"==t&&_(window).unbind("scroll",c)}),_(document.body).on("click",'a[href="#spu-'+f+'"], .spu-open-'+f,function(t){t.preventDefault(),y(f,!0,!1)}),_('a[href="#spu-'+f+'"], .spu-open-'+f).css("cursor","pointer").addClass("spu-clickable"),u.find(".gform_wrapper form").addClass("gravity-form"),u.find(".mc4wp-form form").addClass("mc4wp-form"),u.find(".newsletter form").addClass("newsletter-form");var l=u.find("form");if(l.length){if(!l.is(".newsletter-form, .wpcf7-form, .gravity-form, .infusion-form, .widget_wysija, .ninja-forms-form")){var h=l.attr("action"),m=new RegExp(spuvar.site_url,"i");h&&h.length&&(m.test(h)||l.addClass("spu-disable-ajax"))}_(".spu-disable-ajax form").length&&_(".spu-disable-ajax form").addClass("spu-disable-ajax"),u.on("submit",'form.spu-disable-ajax:not(".flp_form")',function(){u.trigger("spu.form_submitted",[f]),y(f,!1,!0)}),u.on("submit",'form:not(".newsletter-form, .wpcf7-form, .gravity-form, .infusion-form, .spu-disable-ajax, .widget_wysija, .ninja-forms-form, .flp_form")',function(t){t.preventDefault();var e=_(this),n=e.find('input[type="submit"]'),i=n?n.attr("name")+"="+n.val():"button=send",r=e.serialize()+"&"+i,o=e.find('input[name="_wp_http_referer"]'),s=o?spuvar.site_url+o.val():window.location.href,a=e.attr("action")?e.attr("action"):s;return x(r,e.hasClass("mc4wp-form")?spuvar.site_url+"/":a,function(t){var e=_(t).filter("#spu-"+f).html();_("#spu-"+f).html(e),_("#spu-"+f).find(".mc4wp-alert").length||setTimeout(function(){y(f,!1,!0)},1e3*spuvar.seconds_confirmation_close)},function(t,e,n){console.log("Spu Form error: "+e+" - "+n)},"html"),u.trigger("spu.form_submitted",[f]),!0}),_(document).on("wpcf7mailsent",function(){u.trigger("spu.form_submitted",[f]),y(f,!1,!0)}),l.hasClass("gravity-form")&&l.attr("action",window.location.href),_(document).on("gform_confirmation_loaded",function(){u.trigger("spu.form_submitted",[f]),y(f,!1,!0)}),u.on("submit",".infusion-form",function(t){t.preventDefault(),u.trigger("spu.form_submitted",[f]),y(f,!1,!0),this.submit()}),u.on("submit",".newsletter-form",function(t){t.preventDefault(),u.trigger("spu.form_submitted",[f]),y(f,!1,!0),this.submit()}),_("body").on("submitResponse.default",function(){u.trigger("spu.form_submitted",[f]),y(f,!1,!0)})}u.find(".nf-form-cont").length&&_(document).on("nfFormSubmitResponse",function(){u.trigger("spu.form_submitted",[f]),setTimeout(function(){y(f,!1,!0)},1e3*spuvar.seconds_confirmation_close)})}),{show:function(t){return y(t,!0,!1)},hide:function(t,e,n){return y(t,!1,n)},request:function(t,e,n,i){return x(t,e,n,i)}}};if(spuvar.ajax_mode){x({pid:spuvar.pid,referrer:document.referrer,query_string:document.location.search,is_category:spuvar.is_category,is_archive:spuvar.is_archive,is_preview:spuvar.is_preview},spuvar.ajax_mode_url,function(t){_("body").append(t),_(".spu-box").imagesLoaded(function(){window.SPU=e(),_(".spu-box form").each(function(){var t=_(this).attr("action");t&&_(this).attr("action",t.replace("?spu_action=spu_load",""))}),_.fn.wpcf7InitForm&&_(".spu-box div.wpcf7 > form").wpcf7InitForm()})},function(t,e,n){console.log("Problem loading popups - error: "+e+" - "+n)},"html")}else _(".spu-box").imagesLoaded(function(){window.SPU=e()});function x(t,e,n,i,r){var o={url:spuvar.ajax_url,data:t,cache:!1,type:"POST",dataType:"json",timeout:3e4};r=r||!1,n=n||!1,i=i||!1;e&&(o.url=e),n&&(o.success=n),i&&(o.error=i),r&&(o.dataType=r),_.ajax(o)}var t=!1,n=setInterval(function(){"undefined"==typeof FB||t||function(){try{FB.Event.subscribe("edge.create",function(t,e){var n=_(e).parents(".spu-box").data("box-id");n&&SPU.hide(n,!1,!0)})}catch(t){}t=!0,clearInterval(n)}()},1e3);if("undefined"!=typeof twttr)try{twttr.ready(function(t){t.events.bind("tweet",i),t.events.bind("follow",i)})}catch(t){}function i(t){var e=_(t.target).parents(".spu-box").data("box-id");e&&SPU.hide(e,!1,!0)}}(jQuery);